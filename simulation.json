{"version":2,"kind":"Article","sha256":"68709bcc138f264941a02961510df85cfa9ba4bce5eef18833c3eedf5fc20ee0","slug":"simulation","location":"/simulation.md","dependencies":[],"frontmatter":{"title":"Programs as Models","content_includes_title":true,"authors":[{"nameParsed":{"literal":"Pierre-Luc Bacon","given":"Pierre-Luc","family":"Bacon"},"name":"Pierre-Luc Bacon","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/pierrelux/rlbook","math":{"\\Proj":{"macro":"\\mathsf{P}"},"\\Residual":{"macro":"\\mathsf{N}"},"\\Contraction":{"macro":"\\mathsf{T}"},"\\Bellman":{"macro":"\\mathsf{L}"},"\\BellmanPi":{"macro":"\\mathsf{L}_\\pi"},"\\BellmanQuad":{"macro":"\\widetilde{\\mathsf{L}}"},"\\EulerResidual":{"macro":"\\mathsf{H}"}},"numbering":{"title":{"offset":1}},"source_url":"https://github.com/pierrelux/rlbook/blob/main/simulation.md","edit_url":"https://github.com/pierrelux/rlbook/edit/main/simulation.md","exports":[{"format":"md","filename":"simulation.md","url":"/rlbook/build/simulation-54c461ec52b032f711706a9d4719a4c1.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":1,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Programs as Models","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"x5O74kLtg4"}],"identifier":"programs-as-models","label":"Programs as Models","html_id":"programs-as-models","implicit":true,"key":"uOytFhlSoM"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Up to this point, we have described models using systems of equations—either differential or difference equations—that express how a system evolves over time. These ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"maoGh0wqAE"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"analytical models","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"uqrpWQcCne"}],"key":"XeA6GqwevO"},{"type":"text","value":" define the transition structure explicitly. For instance, in discrete time, the evolution of the state is governed by a known function:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GIPtPwaLpJ"}],"key":"l46uwlFuKN"},{"type":"math","value":"\\mathbf{x}_{k+1} = f(\\mathbf{x}_k, \\mathbf{u}_k)","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi mathvariant=\"bold\">x</mi><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">u</mi><mi>k</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbf{x}_{k+1} = f(\\mathbf{x}_k, \\mathbf{u}_k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6528em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"1","key":"cVGpIBXmjV"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Given access to ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KpXVnfSCDM"},{"type":"inlineMath","value":"f","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>","key":"sDGwtR0iVw"},{"type":"text","value":", we can construct trajectories, analyze system behavior, and design control policies. The important feature here is not that the model evolves one step at a time, but that we are given the ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"f7iELeNUSL"},{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"local dynamics function","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"yrQ51fQvoS"}],"key":"F1HwXNEdC5"},{"type":"text","value":" ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"pD6UNAl1Zu"},{"type":"inlineMath","value":"f","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>","key":"ynnF0kGvgq"},{"type":"text","value":" itself.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"AgWMWTjOtP"}],"key":"XCaIhnLTMo"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"In contrast, ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"aLRsIO2ueC"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"simulation-based models","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"hddsnw5oCu"}],"key":"bJkXe2NCGa"},{"type":"text","value":" do not expose ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"JEVnPmVbrc"},{"type":"inlineMath","value":"f","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>","key":"ziAFE34sWF"},{"type":"text","value":" directly. Instead, they define a procedure—implemented in code—that takes an initial state and input sequence and returns the resulting trajectory:","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"pPOImRipf5"}],"key":"Ls6mI15rw9"},{"type":"math","value":"\\{\\mathbf{x}_0, \\mathbf{x}_1, \\dots, \\mathbf{x}_T\\} = \\mathcal{S}(\\mathbf{x}_0, \\{\\mathbf{u}_t\\}_{t=0}^{T-1})","position":{"start":{"line":15,"column":1},"end":{"line":17,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo stretchy=\"false\">{</mo><msub><mi mathvariant=\"bold\">x</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><msub><mi mathvariant=\"bold\">x</mi><mi>T</mi></msub><mo stretchy=\"false\">}</mo><mo>=</mo><mi mathvariant=\"script\">S</mi><mo stretchy=\"false\">(</mo><msub><mi mathvariant=\"bold\">x</mi><mn>0</mn></msub><mo separator=\"true\">,</mo><mo stretchy=\"false\">{</mo><msub><mi mathvariant=\"bold\">u</mi><mi>t</mi></msub><msubsup><mo stretchy=\"false\">}</mo><mrow><mi>t</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>T</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\{\\mathbf{x}_0, \\mathbf{x}_1, \\dots, \\mathbf{x}_T\\} = \\mathcal{S}(\\mathbf{x}_0, \\{\\mathbf{u}_t\\}_{t=0}^{T-1})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathbf\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathbf\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">}</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1478em;vertical-align:-0.2564em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.075em;\">S</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbf\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">{</span><span class=\"mord\"><span class=\"mord mathbf\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">}</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913em;\"><span style=\"top:-2.4436em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2564em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"2","key":"DFzuNUpjt7"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Here, ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"pSM7fAoZ08"},{"type":"inlineMath","value":"\\mathcal{S}","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">S</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{S}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.075em;\">S</span></span></span></span>","key":"SyVRqCKbVj"},{"type":"text","value":" represents the full simulator. Internally, it may apply numerical integration, scheduling logic, branching rules, or other computations. But these details are encapsulated. From the outside, we can only query the simulator by running it.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Z2w2t3ldy9"}],"key":"Noa3K0xP6t"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"This distinction is subtle but important. Both types of models can generate trajectories. What matters is the ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"xtshf2bY11"},{"type":"strong","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"interface","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"DLeHdb6G6H"}],"key":"JlfRton3sq"},{"type":"text","value":": analytical models provide direct access to ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"gSTBOYtCLy"},{"type":"inlineMath","value":"f","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>","key":"lDr8PGtiLj"},{"type":"text","value":"; simulation models do not. They offer a trajectory-generation interface, but hide the internal structure that produces it.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"aMCNwNKTgT"}],"key":"rRLgYAt7kF"},{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"strong","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Case Study: Robotics — ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Cmj3SxNPhv"},{"type":"emphasis","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"MuJoCo","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Mv47tA3hiT"}],"key":"X34Smlo8Vc"}],"key":"oDMMcKk7d1"}],"key":"PLkOUulR6q"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"MuJoCo illustrates this distinction well. It simulates the dynamics of articulated rigid bodies under contact constraints. The equations it solves include:","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"bx407UqGRn"}],"key":"fsWunalAhv"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"inlineMath","value":"\nM(\\mathbf{q})\\ddot{\\mathbf{q}} + C(\\mathbf{q}, \\dot{\\mathbf{q}}) = \\boldsymbol{\\tau} + J^\\top \\boldsymbol{\\lambda}","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">q</mi><mo stretchy=\"false\">)</mo><mover accent=\"true\"><mi mathvariant=\"bold\">q</mi><mo>¨</mo></mover><mo>+</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">q</mi><mo separator=\"true\">,</mo><mover accent=\"true\"><mi mathvariant=\"bold\">q</mi><mo>˙</mo></mover><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"bold-italic\">τ</mi><mo>+</mo><msup><mi>J</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi mathvariant=\"bold-italic\">λ</mi></mrow><annotation encoding=\"application/x-tex\">\nM(\\mathbf{q})\\ddot{\\mathbf{q}} + C(\\mathbf{q}, \\dot{\\mathbf{q}}) = \\boldsymbol{\\tau} + J^\\top \\boldsymbol{\\lambda}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mopen\">(</span><span class=\"mord mathbf\">q</span><span class=\"mclose\">)</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6813em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">q</span></span><span style=\"top:-3.0134em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1667em;\"><span class=\"mord\">¨</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mopen\">(</span><span class=\"mord mathbf\">q</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6813em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">q</span></span><span style=\"top:-3.0134em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.0556em;\"><span class=\"mord\">˙</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord boldsymbol\" style=\"margin-right:0.13472em;\">τ</span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.09618em;\">J</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord boldsymbol\">λ</span></span></span></span></span></span>","key":"Z9b0HPExdG"}],"key":"UIxd1X5QhF"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"inlineMath","value":"\n\\phi(\\mathbf{q}) = 0, \\quad \\boldsymbol{\\lambda} \\geq 0, \\quad \\boldsymbol{\\lambda}^\\top \\phi = 0","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">q</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo><mspace width=\"1em\"/><mi mathvariant=\"bold-italic\">λ</mi><mo>≥</mo><mn>0</mn><mo separator=\"true\">,</mo><mspace width=\"1em\"/><msup><mi mathvariant=\"bold-italic\">λ</mi><mi mathvariant=\"normal\">⊤</mi></msup><mi>ϕ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\n\\phi(\\mathbf{q}) = 0, \\quad \\boldsymbol{\\lambda} \\geq 0, \\quad \\boldsymbol{\\lambda}^\\top \\phi = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">ϕ</span><span class=\"mopen\">(</span><span class=\"mord mathbf\">q</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord boldsymbol\">λ</span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1279em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:1em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord\"><span class=\"mord boldsymbol\">λ</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9334em;\"><span style=\"top:-3.1473em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">⊤</span></span></span></span></span></span></span></span><span class=\"mord mathnormal\">ϕ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>","key":"imeIRxHrfj"}],"key":"Y4FcLLBcOw"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Here ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"awYUOkwKSh"},{"type":"inlineMath","value":"\\mathbf{q}","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf{q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6389em;vertical-align:-0.1944em;\"></span><span class=\"mord mathbf\">q</span></span></span></span>","key":"gmzEAiBqnr"},{"type":"text","value":" are joint positions, ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"ZDz9rdfYYr"},{"type":"inlineMath","value":"M","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>","key":"pSAzbpdVjr"},{"type":"text","value":" is the mass matrix, and ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"znCzv8QjVm"},{"type":"inlineMath","value":"\\boldsymbol{\\lambda}","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold-italic\">λ</mi></mrow><annotation encoding=\"application/x-tex\">\\boldsymbol{\\lambda}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord boldsymbol\">λ</span></span></span></span></span></span>","key":"HLWRNRgbpY"},{"type":"text","value":" are contact forces enforcing non-penetration. But these physical equations are part of a larger simulator that also includes:","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"SHzOiVOvwO"}],"key":"BUmmxCQJ28"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":37,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"collision detection,","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"bFUUPJA5d6"}],"key":"ITPCad5bha"}],"key":"QqZzx7iBWe"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"contact force models,","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"RGNL1WzGiu"}],"key":"eCgYIVxOwM"}],"key":"iTsKAxLWN4"},{"type":"listItem","spread":true,"position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"sensor and actuator emulation,","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"HQmRea8AwI"}],"key":"saA4TA8P3m"}],"key":"zbbTi47EyD"},{"type":"listItem","spread":true,"position":{"start":{"line":40,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"and visual rendering.","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"key":"MjzgtqhADT"}],"key":"PlEi66u9BQ"}],"key":"p1WlJRJP1s"}],"key":"BrsqGr49yS"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"The full behavior of a robot interacting with its environment emerges only when the simulator is executed. While the underlying physics are well-understood, the complexity of contact dynamics, collision detection, and sensor modeling makes it impractical to expose the local dynamics function ","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"BmB6UgbwzF"},{"type":"inlineMath","value":"f","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>","key":"xO2I5dMtkU"},{"type":"text","value":" directly.","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"IbJNL6UpK7"}],"key":"daAmNnezfB"},{"type":"heading","depth":2,"position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"text","value":"Systems with Discrete Events","position":{"start":{"line":44,"column":1},"end":{"line":44,"column":1}},"key":"oGFETAtuWB"}],"identifier":"systems-with-discrete-events","label":"Systems with Discrete Events","html_id":"systems-with-discrete-events","implicit":true,"key":"n0CwPk5Vdz"},{"type":"paragraph","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"Many simulation models arise when a system’s dynamics are driven not by time-continuous evolution, but by the occurrence of events. These ","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"fNTjDYZIYp"},{"type":"strong","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"children":[{"type":"text","value":"discrete-event systems","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"HiEoPJ8nCy"}],"key":"ZgY9gsMQSC"},{"type":"text","value":" (DES) change state only at specific, often asynchronous points in time. Between events, the state remains fixed.","position":{"start":{"line":46,"column":1},"end":{"line":46,"column":1}},"key":"SNmPC6E4wb"}],"key":"vuJqi2RCOR"},{"type":"paragraph","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"A discrete-event system can be described by:","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"cEXaQPJl8v"}],"key":"AdrqKa52hn"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":50,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"a set of discrete states ","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"dY1Fpq6L5N"},{"type":"inlineMath","value":"\\mathcal{X}","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">X</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{X}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.14643em;\">X</span></span></span></span>","key":"kWhSfR1b4h"},{"type":"text","value":",","position":{"start":{"line":50,"column":1},"end":{"line":50,"column":1}},"key":"MhEMbLp62j"}],"key":"Ay97xfpue4"}],"key":"B9OL5CWhqV"},{"type":"listItem","spread":true,"position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"a set of events ","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"aJOdi8mPLw"},{"type":"inlineMath","value":"\\mathcal{E}","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">E</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{E}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.08944em;\">E</span></span></span></span>","key":"qu0ldQa9kV"},{"type":"text","value":",","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"Mqqj1b5VN5"}],"key":"kKP43cAUkz"}],"key":"X4u7ZBWFTo"},{"type":"listItem","spread":true,"position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"a transition function ","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"NdUjzse0Ie"},{"type":"inlineMath","value":"f: \\mathcal{X} \\times \\mathcal{E} \\rightarrow \\mathcal{X}","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi mathvariant=\"script\">X</mi><mo>×</mo><mi mathvariant=\"script\">E</mi><mo>→</mo><mi mathvariant=\"script\">X</mi></mrow><annotation encoding=\"application/x-tex\">f: \\mathcal{X} \\times \\mathcal{E} \\rightarrow \\mathcal{X}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.14643em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.08944em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.14643em;\">X</span></span></span></span>","key":"hhzwoHr4ut"},{"type":"text","value":",","position":{"start":{"line":52,"column":1},"end":{"line":52,"column":1}},"key":"QxczaO17Oy"}],"key":"BdEq8A3Kv4"}],"key":"rul6Lc9jqv"},{"type":"listItem","spread":true,"position":{"start":{"line":53,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"and a time-advance function ","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"Os3DVTP3Tx"},{"type":"inlineMath","value":"t_a: \\mathcal{X} \\rightarrow \\mathbb{R}_{\\geq 0}","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>t</mi><mi>a</mi></msub><mo>:</mo><mi mathvariant=\"script\">X</mi><mo>→</mo><msub><mi mathvariant=\"double-struck\">R</mi><mrow><mo>≥</mo><mn>0</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">t_a: \\mathcal{X} \\rightarrow \\mathbb{R}_{\\geq 0}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7651em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.14643em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.9341em;vertical-align:-0.2452em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mrel mtight\">≥</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2452em;\"><span></span></span></span></span></span></span></span></span></span>","key":"UFjE1UWHJc"},{"type":"text","value":".","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"bMOypgo4L5"}],"key":"xsB6AKUR8p"}],"key":"dEaVNHb1mW"}],"key":"NW6KffWjh4"},{"type":"paragraph","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"At each point, the system checks which events are enabled and advances to the next scheduled one.","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"WOKSiRFiuu"}],"key":"KPXPUbw7y1"},{"type":"paragraph","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"strong","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"Example: Network Traffic Control System","position":{"start":{"line":57,"column":1},"end":{"line":57,"column":1}},"key":"dr34JNQauK"}],"key":"Ns5EGE1QLS"}],"key":"WZcH0GZMmA"},{"type":"paragraph","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"Consider a software-defined networking (SDN) controller managing traffic routing in a data center. The system must make real-time decisions about packet forwarding paths based on network conditions and service requirements.","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"gmS3iVSWwU"}],"key":"dMZjdZ9Pkt"},{"type":"paragraph","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"The discrete states ","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"XT5cElfe8h"},{"type":"inlineMath","value":"\\mathcal{X}","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">X</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{X}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.14643em;\">X</span></span></span></span>","key":"EDjWURuGMt"},{"type":"text","value":" represent the current network configuration: active routing tables, link utilization levels, and quality-of-service priority queues at each switch.","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"DfwLr4Ho4m"}],"key":"LcxcqK75uw"},{"type":"paragraph","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"The events ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"zBqogAJuLV"},{"type":"inlineMath","value":"\\mathcal{E}","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">E</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{E}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.08944em;\">E</span></span></span></span>","key":"c36RWOtqRg"},{"type":"text","value":" include:","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"ZMEHZbmKTW"}],"key":"wziqqlisKz"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":64,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"New flow requests arriving (video streaming, database queries, file transfers)","position":{"start":{"line":64,"column":1},"end":{"line":64,"column":1}},"key":"QxWcC9pu6v"}],"key":"LpSYgctXUr"}],"key":"izKv9dD3Sn"},{"type":"listItem","spread":true,"position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Link failures or congestion threshold violations","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"qug3ITLQrX"}],"key":"pNyUDYVnf9"}],"key":"NSrhurBuCY"},{"type":"listItem","spread":true,"position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Flow completion notifications","position":{"start":{"line":66,"column":1},"end":{"line":66,"column":1}},"key":"cJKJg8oLqD"}],"key":"Ng2olhBHJf"}],"key":"ZBEUFy0e80"},{"type":"listItem","spread":true,"position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Load balancing triggers when servers exceed capacity","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"O52SjSMoTj"}],"key":"iNHCxpbCe9"}],"key":"oawvl7VaEP"},{"type":"listItem","spread":true,"position":{"start":{"line":68,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Network policy updates from administrators","position":{"start":{"line":68,"column":1},"end":{"line":68,"column":1}},"key":"N7ADHeJ4nX"}],"key":"yIiw76tYVv"}],"key":"DaBM21r5kf"}],"key":"UQQZpVueob"},{"type":"paragraph","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"The transition function ","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"QNiQhWE5aL"},{"type":"inlineMath","value":"f","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>","key":"fsM9epnaDU"},{"type":"text","value":" captures how routing decisions change the network state. When a high-priority video conference flow arrives while a link is congested, the controller might transition to a new state where low-priority background traffic is rerouted through alternative paths.","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"OjQ0t7tcGf"}],"key":"Jc0FCl6rwC"},{"type":"paragraph","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"text","value":"The time-advance function ","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"RWh7YyxY9N"},{"type":"inlineMath","value":"t_a","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>t</mi><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">t_a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7651em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"uHhUSZ3bQZ"},{"type":"text","value":" determines when the next routing decision occurs. Flow arrivals follow traffic patterns (bursty during business hours), while link failures are rare but unpredictable events.","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"DMj7xC07JI"}],"key":"s7Rbi1lsjN"},{"type":"paragraph","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"Between events, packets follow the established routing rules—the same forwarding tables remain active across all switches. The control problem here is to adapt routing decisions to discrete network events, balancing throughput, latency, and reliability constraints.","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"loooPr8mTU"}],"key":"tm9VFIAY78"},{"type":"heading","depth":2,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"text","value":"Hybrid Systems","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"IrpPzh3dT2"}],"identifier":"hybrid-systems","label":"Hybrid Systems","html_id":"hybrid-systems","implicit":true,"key":"DB1b6OeOwA"},{"type":"paragraph","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"Some systems evolve continuously most of the time but undergo discrete jumps in response to certain conditions. These ","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"Svpccju0rK"},{"type":"strong","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"hybrid systems","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"jaJ3Tbbl9o"}],"key":"PUPeuG6cv4"},{"type":"text","value":" are common in control applications.","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"GcuDjFLQz7"}],"key":"iImDViaUFT"},{"type":"paragraph","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"The system consists of:","position":{"start":{"line":80,"column":1},"end":{"line":80,"column":1}},"key":"ZTf5oypvEG"}],"key":"lLdvY5DR5B"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":82,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"a set of discrete modes ","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"rhrOl2bT5j"},{"type":"inlineMath","value":"q \\in \\mathcal{Q}","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>q</mi><mo>∈</mo><mi mathvariant=\"script\">Q</mi></mrow><annotation encoding=\"application/x-tex\">q \\in \\mathcal{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7335em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7805em;vertical-align:-0.0972em;\"></span><span class=\"mord mathcal\">Q</span></span></span></span>","key":"wvg6g4kjxN"},{"type":"text","value":",","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"l3pj3WIEq9"}],"key":"WTjB0TimQ0"}],"key":"BditIHFbDi"},{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"continuous dynamics in each mode: ","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"UoibYFwPJu"},{"type":"inlineMath","value":"\\dot{\\mathbf{x}} = f_q(\\mathbf{x})","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi mathvariant=\"bold\">x</mi><mo>˙</mo></mover><mo>=</mo><msub><mi>f</mi><mi>q</mi></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"bold\">x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\dot{\\mathbf{x}} = f_q(\\mathbf{x})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6813em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6813em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbf\">x</span></span><span style=\"top:-3.0134em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1111em;\"><span class=\"mord\">˙</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">q</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbf\">x</span><span class=\"mclose\">)</span></span></span></span>","key":"lFfBNZFIhE"},{"type":"text","value":",","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"Fr3IBUp934"}],"key":"OXTcM9AGoP"}],"key":"U5RHwDjXak"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"guards that specify when transitions between modes occur,","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"pV0fMcmK8d"}],"key":"p5kvFhdZuB"}],"key":"zHa2BzZaYy"},{"type":"listItem","spread":true,"position":{"start":{"line":85,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"and reset maps that update the state during such transitions.","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"EQcGdFLDiP"}],"key":"nvFJJQxdfk"}],"key":"BZF9yFUC73"}],"key":"QZMM66DbSz"},{"type":"paragraph","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"strong","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"text","value":"Example: Thermostat Control","position":{"start":{"line":87,"column":1},"end":{"line":87,"column":1}},"key":"iodIwme4ak"}],"key":"hQDKZn7FZC"}],"key":"m9LUYBDhto"},{"type":"paragraph","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"text","value":"An HVAC system can be in one of several modes: ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"vNElZFuYgb"},{"type":"inlineCode","value":"heating","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"f8npxPpwoM"},{"type":"text","value":", ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"i2g6pEj8jk"},{"type":"inlineCode","value":"cooling","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"ojVN93NxOb"},{"type":"text","value":", or ","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"ib26FeiBhN"},{"type":"inlineCode","value":"off","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"OX7nKScjuo"},{"type":"text","value":". The temperature evolves continuously according to physical laws, but when it crosses certain thresholds, the system switches modes:","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"fkoNOGKNSs"}],"key":"z6RxsmdYHi"},{"type":"code","lang":"python","value":"if x < setpoint - delta:\n    mode = \"heating\"\nelif x > setpoint + delta:\n    mode = \"cooling\"\nelse:\n    mode = \"off\"","position":{"start":{"line":91,"column":1},"end":{"line":98,"column":1}},"key":"YQONe6gsPV"},{"type":"paragraph","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"Within each mode, a different differential equation applies. This results in a piecewise-smooth trajectory with mode-dependent dynamics.","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"hwMAAtMg3O"}],"key":"Fpyz4UfSHD"},{"type":"paragraph","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"strong","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"Case Study: Building Energy — ","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"yrxqvabzHl"},{"type":"emphasis","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"EnergyPlus","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"OSETVVHGts"}],"key":"zCq5bp7agS"}],"key":"HjLSN2vQGs"}],"key":"LINJ6dOzqg"},{"type":"paragraph","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"text","value":"EnergyPlus provides a sophisticated example of hybrid systems in building energy simulation. At its core are physical equations describing heat flows:","position":{"start":{"line":104,"column":1},"end":{"line":104,"column":1}},"key":"GclZ36NhFs"}],"key":"O1yfLIV1rI"},{"type":"math","value":"C_i \\frac{dT_i}{dt} = \\sum_j h_{ij} A_{ij}(T_j - T_i) + Q_i","position":{"start":{"line":106,"column":1},"end":{"line":108,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mfrac><mrow><mi>d</mi><msub><mi>T</mi><mi>i</mi></msub></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><munder><mo>∑</mo><mi>j</mi></munder><msub><mi>h</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=\"false\">(</mo><msub><mi>T</mi><mi>j</mi></msub><mo>−</mo><msub><mi>T</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo>+</mo><msub><mi>Q</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">C_i \\frac{dT_i}{dt} = \\sum_j h_{ij} A_{ij}(T_j - T_i) + Q_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.0574em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.4638em;vertical-align:-1.4138em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.05em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4138em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">h</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">ij</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">A</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">ij</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>","enumerator":"3","key":"XgAFlAlYpf"},{"type":"paragraph","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"It also solves implicit equations representing HVAC component behavior:","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"XdHOAMMK5S"}],"key":"JPm4No951S"},{"type":"math","value":"0 = f(T, \\dot{m}, P)","position":{"start":{"line":112,"column":1},"end":{"line":114,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mn>0</mn><mo>=</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mo separator=\"true\">,</mo><mover accent=\"true\"><mi>m</mi><mo>˙</mo></mover><mo separator=\"true\">,</mo><mi>P</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">0 = f(T, \\dot{m}, P)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6679em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\">m</span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1389em;\"><span class=\"mord\">˙</span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"4","key":"hjIcssfXS5"},{"type":"paragraph","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"children":[{"type":"text","value":"But the actual simulator includes hundreds of thousands of lines of code handling:","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"Rw3qJv5hNh"}],"key":"kfEd3hsY0C"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":118,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"interpolated weather data,","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"qL2UpoFVfB"}],"key":"j8wDMkzj5T"}],"key":"hmNHkbyO2O"},{"type":"listItem","spread":true,"position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"occupancy schedules,","position":{"start":{"line":119,"column":1},"end":{"line":119,"column":1}},"key":"P60pSvyJwR"}],"key":"cJKukqEUf6"}],"key":"jmZQUCttix"},{"type":"listItem","spread":true,"position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"equipment performance curves,","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"sFFtjWHWBU"}],"key":"holk49Qw2Y"}],"key":"pF98a4ekoF"},{"type":"listItem","spread":true,"position":{"start":{"line":121,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"and control logic implemented as finite-state machines.","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"key":"P7pJKCV89A"}],"key":"DVJyPreDJ4"}],"key":"PtjZld9e50"}],"key":"IlxIMheYcB"},{"type":"paragraph","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"text","value":"The result is a program that emulates how a building behaves over time, given environmental inputs and schedules. The hybrid nature emerges from the interaction between continuous thermal dynamics and discrete control decisions made by thermostats, occupancy sensors, and HVAC equipment.","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"e2hjf9MnCQ"}],"key":"Zjfmw0mG74"},{"type":"heading","depth":2,"position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"text","value":"Agent-Based Models","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"rbXQtGUN8j"}],"identifier":"agent-based-models","label":"Agent-Based Models","html_id":"agent-based-models","implicit":true,"key":"oVZv1j7Ney"},{"type":"paragraph","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"Some simulation models do not describe systems via global state transitions, but instead simulate the behavior of many individual components or ","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"dRdE7ijBbo"},{"type":"strong","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"agents","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"YFu0ooxdL3"}],"key":"ilf7qsr3x1"},{"type":"text","value":", each following local rules. These ","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"UTckaiyKOU"},{"type":"strong","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"text","value":"agent-based models","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"fWmOx0stYS"}],"key":"neWxQF8sLF"},{"type":"text","value":" (ABMs) are widely used in epidemiology, ecology, and social modeling.","position":{"start":{"line":127,"column":1},"end":{"line":127,"column":1}},"key":"JQhM3YGPRY"}],"key":"nWHvvBuYku"},{"type":"paragraph","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"Each agent maintains its own internal state and acts according to probabilistic or rule-based logic. The system’s behavior arises from the interactions among agents.","position":{"start":{"line":129,"column":1},"end":{"line":129,"column":1}},"key":"aEbp7w6ZXC"}],"key":"xwueOR0cRr"},{"type":"paragraph","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"strong","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"Example: Residential Energy Consumption under Dynamic Pricing","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"R1UfVuOBg2"}],"key":"HhIfYA1fEi"}],"key":"GVc0zH8tQU"},{"type":"paragraph","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Consider a neighborhood where each household is an agent making energy consumption decisions based on real-time electricity pricing and thermal comfort preferences. Each household agent has:","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"JQeWy8xkPB"}],"key":"VEJUogAqyK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":135,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"text","value":"Internal state","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"IuloiiutSE"}],"key":"JTFsps3Gj0"},{"type":"text","value":": current temperature, HVAC settings, comfort preferences, price sensitivity","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"klYb032LAx"}],"key":"eX6pXb8HsE"}],"key":"HhfAsAonJV"},{"type":"listItem","spread":true,"position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"children":[{"type":"text","value":"Local decision rules","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"BeluWkLaf8"}],"key":"kkselbNqpO"},{"type":"text","value":": MPC algorithms that optimize the trade-off between energy cost and thermal comfort","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"VEiJ4NNyin"}],"key":"RR3H4iZilg"}],"key":"F1uRWinZLD"},{"type":"listItem","spread":true,"position":{"start":{"line":137,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"children":[{"type":"text","value":"Unique characteristics","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"yrRFjHiIQq"}],"key":"rMDMqMzNEa"},{"type":"text","value":": different utility functions, thermal mass, occupancy patterns","position":{"start":{"line":137,"column":1},"end":{"line":137,"column":1}},"key":"vosHi41OXu"}],"key":"BvTeTDd6rf"}],"key":"L3PwPCsRTh"}],"key":"Mhmu7mYuDi"},{"type":"paragraph","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"text","value":"The simulator might execute something like:","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"OYUOHBezj0"}],"key":"qOZeoxqmQk"},{"type":"code","lang":"python","value":"for household in neighborhood:\n    # Each household solves its own MPC optimization\n    current_price = utility.get_current_price()\n    comfort_weight = household.comfort_preference\n    \n    # Optimize over prediction horizon\n    optimal_setpoint = household.mpc_controller.optimize(\n        current_temp=household.temperature,\n        price_forecast=utility.price_forecast,\n        comfort_weight=comfort_weight\n    )\n    \n    household.set_hvac_setpoint(optimal_setpoint)\n    \n    # Update shared grid load\n    neighborhood.total_demand += household.power_consumption","position":{"start":{"line":141,"column":1},"end":{"line":158,"column":1}},"key":"ZfvQfnbGos"},{"type":"paragraph","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"children":[{"type":"text","value":"The macro-level demand patterns—peak shifting, load leveling, rebound effects—emerge from individual household optimization decisions. No single equation describes the neighborhood’s energy consumption; it arises from the collective behavior of autonomous agents each solving their own control problems.","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"uwT45HdPki"}],"key":"uKsBnXFhLR"},{"type":"paragraph","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"strong","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"text","value":"Case Study: Traffic Simulation — ","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"VlbBPHvBc9"},{"type":"emphasis","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"children":[{"type":"text","value":"SUMO","position":{"start":{"line":162,"column":1},"end":{"line":162,"column":1}},"key":"unSu52kIZ4"}],"key":"CZbREBeLCG"}],"key":"M2vYjZh8Ej"}],"key":"eMkZGtgi1q"},{"type":"paragraph","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"children":[{"type":"text","value":"SUMO demonstrates agent-based modeling in transportation systems. Each vehicle is an agent with its own route, driving behavior, and decision-making logic. The Krauss car-following rule shows how individual vehicle agents behave:","position":{"start":{"line":164,"column":1},"end":{"line":164,"column":1}},"key":"cePYjF1H8Y"}],"key":"KB9BylFvw4"},{"type":"code","lang":"python","value":"def update_vehicle(v, v_leader, gap, dt):\n    v_safe = v_leader + (gap - min_gap) / tau\n    v_desired = min(v_max, v_safe)\n    ε = random.uniform(0, 1)\n    v_new = max(0, v_desired - ε * a_max * dt)\n    x_new = x + v_new * dt\n    return x_new, v_new","position":{"start":{"line":166,"column":1},"end":{"line":174,"column":1}},"key":"ppTtiKpfYI"},{"type":"paragraph","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"Beyond car-following, each vehicle agent also:","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"bshbnCWC8S"}],"key":"YXnoaruGE8"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":178,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"plans routes through the network based on travel time estimates,","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"NExmeXxdNf"}],"key":"JgUWeh9RIb"}],"key":"qDFLUXjfok"},{"type":"listItem","spread":true,"position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"responds to traffic signals and road conditions,","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"A9kFd1cgfB"}],"key":"U9YgbP7R3U"}],"key":"dmXDkpTYNy"},{"type":"listItem","spread":true,"position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"makes lane-changing decisions based on utility functions,","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"xrYH75McT7"}],"key":"P8grAcOH74"}],"key":"gTj5ZfX3Tf"},{"type":"listItem","spread":true,"position":{"start":{"line":181,"column":1},"end":{"line":182,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"and exhibits individual driving characteristics (aggressiveness, reaction time).","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"xBbTmDKtw0"}],"key":"ORT2YrrXzh"}],"key":"eI9eRUGdUD"}],"key":"CSLOJRdRdr"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"The emergent traffic patterns—congestion formation, traffic waves, bottlenecks—arise from the collective behavior of thousands of individual vehicle agents, each following local rules and making autonomous decisions.","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"wlHkMFpxLD"}],"key":"BQf6jw26xj"},{"type":"paragraph","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"children":[{"type":"strong","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"children":[{"type":"text","value":"Case Study: Modeling Curbside Access at Montréal–Trudeau (YUL)","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"NjXvzknjIi"}],"key":"wh4la0NnS2"}],"key":"hXGu0bVdXT"},{"type":"paragraph","position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"children":[{"type":"text","value":"Afternoon traffic at Montréal–Trudeau airport regularly backs up along the two-lane ramp leading to the departures curb. As passenger volumes rebound, the mix of private drop-offs, taxis, and shuttles converging in a confined space produces frequent delays. When curb dwell times rise—especially around wide-body departures—queues can spill back onto the access road and interfere with other flows on the airport campus.","position":{"start":{"line":187,"column":1},"end":{"line":187,"column":1}},"key":"SFpsR9EgHD"}],"key":"dIqsh8SA8r"},{"type":"paragraph","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"To manage the situation, the airport operator relies on a dense sensor network. Cameras and license plate readers track vehicle trajectories across virtual gates, generating a real-time stream of entry points, curb interactions, and exit times. According to public statements, AI-based forecasting solutions have been deployed to anticipate congestion and suggest alternative routing options for passengers and drivers. While no technical details have been disclosed, this is a typical instance of a traffic prediction and control problem that lends itself to ","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"viS42mD9le"},{"type":"strong","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"children":[{"type":"text","value":"agent-based modeling","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"SXW6P2SCXj"}],"key":"pMUtT7yn1d"},{"type":"text","value":".","position":{"start":{"line":189,"column":1},"end":{"line":189,"column":1}},"key":"O8a3iMjfj7"}],"key":"bmixzjY0VN"},{"type":"paragraph","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"children":[{"type":"text","value":"In such a model, each vehicle is treated as an individual agent with internal state:","position":{"start":{"line":191,"column":1},"end":{"line":191,"column":1}},"key":"wBofsOeiou"}],"key":"qC1NP7drVi"},{"type":"math","value":"s_t = \\bigl(\\text{lane},\\;x_t,\\;v_t,\\;\\text{intent}\\bigr),","position":{"start":{"line":193,"column":1},"end":{"line":195,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>s</mi><mi>t</mi></msub><mo>=</mo><mo fence=\"true\" stretchy=\"true\" minsize=\"1.2em\" maxsize=\"1.2em\">(</mo><mtext>lane</mtext><mo separator=\"true\">,</mo><mtext>  </mtext><msub><mi>x</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><mtext>  </mtext><msub><mi>v</mi><mi>t</mi></msub><mo separator=\"true\">,</mo><mtext>  </mtext><mtext>intent</mtext><mo fence=\"true\" stretchy=\"true\" minsize=\"1.2em\" maxsize=\"1.2em\">)</mo><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">s_t = \\bigl(\\text{lane},\\;x_t,\\;v_t,\\;\\text{intent}\\bigr),</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">s</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2em;vertical-align:-0.35em;\"></span><span class=\"mopen\"><span class=\"delimsizing size1\">(</span></span><span class=\"mord text\"><span class=\"mord\">lane</span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord text\"><span class=\"mord\">intent</span></span><span class=\"mclose\"><span class=\"delimsizing size1\">)</span></span><span class=\"mpunct\">,</span></span></span></span></span>","enumerator":"5","key":"Dvk6lFHleo"},{"type":"paragraph","position":{"start":{"line":197,"column":1},"end":{"line":197,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":197,"column":1},"end":{"line":197,"column":1}},"key":"GyBmuerFAB"},{"type":"inlineMath","value":"x_t","position":{"start":{"line":197,"column":1},"end":{"line":197,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"WXeW0YexgW"},{"type":"text","value":" and ","position":{"start":{"line":197,"column":1},"end":{"line":197,"column":1}},"key":"wXxP7FPtKY"},{"type":"inlineMath","value":"v_t","position":{"start":{"line":197,"column":1},"end":{"line":197,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"tlvvRmDWsy"},{"type":"text","value":" denote longitudinal position and speed, and lane and intent capture higher-level behavioural traits. The simulation proceeds in discrete time. At each step, agents update their acceleration based on local traffic density (e.g., via a car-following model like IDM), evaluate potential lane changes (e.g., using a utility or incentive rule), and advance position accordingly.","position":{"start":{"line":197,"column":1},"end":{"line":197,"column":1}},"key":"vnh01Ls6WK"}],"key":"IRpW6qAZ13"},{"type":"paragraph","position":{"start":{"line":199,"column":1},"end":{"line":199,"column":1}},"children":[{"type":"text","value":"The layout of the ramp—its geometry, merges, and constraints—is fixed. What changes are the traffic patterns and driver behaviours. These can be estimated from historical trajectories and updated as new data arrives. In a real-time setting, a filtering step adjusts the simulation so that its predicted flows remain consistent with current observations.","position":{"start":{"line":199,"column":1},"end":{"line":199,"column":1}},"key":"GNH7DDCLcC"}],"key":"JW3z0ZahRh"},{"type":"paragraph","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"children":[{"type":"text","value":"While the behaviour of each individual agent is governed by program logic and heuristics—such as car-following rules, desired speeds, or gap acceptance—some parameters are identified offline from historical data, while others are estimated online. This adaptation helps the model track observed conditions. But even with such adjustments, not all effects are easily captured.","position":{"start":{"line":201,"column":1},"end":{"line":201,"column":1}},"key":"As9zhWCpLU"}],"key":"ELiw36r915"},{"type":"paragraph","position":{"start":{"line":203,"column":1},"end":{"line":203,"column":1}},"children":[{"type":"text","value":"Construction activity, weather disturbances, and irregular flight scheduling can introduce sudden shifts in flow that lie outside the scope of the structural model. To account for these, one can overlay a data-driven correction on top of the simulation. Suppose the simulator produces a queue length forecast ","position":{"start":{"line":203,"column":1},"end":{"line":203,"column":1}},"key":"nC9oon6gs7"},{"type":"inlineMath","value":"q^{\\text{sim}}_{t+h}","position":{"start":{"line":203,"column":1},"end":{"line":203,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi>q</mi><mrow><mi>t</mi><mo>+</mo><mi>h</mi></mrow><mtext>sim</mtext></msubsup></mrow><annotation encoding=\"application/x-tex\">q^{\\text{sim}}_{t+h}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1719em;vertical-align:-0.3414em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8305em;\"><span style=\"top:-2.4169em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">h</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">sim</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3414em;\"><span></span></span></span></span></span></span></span></span></span>","key":"qk6FJIze8Y"},{"type":"text","value":" over horizon ","position":{"start":{"line":203,"column":1},"end":{"line":203,"column":1}},"key":"EaOlS4AY89"},{"type":"inlineMath","value":"h","position":{"start":{"line":203,"column":1},"end":{"line":203,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span>","key":"dp0f3xHWdp"},{"type":"text","value":". A statistical model can be trained to predict the residual between this forecast and the observed outcome:","position":{"start":{"line":203,"column":1},"end":{"line":203,"column":1}},"key":"rSneu15kJd"}],"key":"HmhvCL0Iy1"},{"type":"math","value":"r_{t+h} = q^{\\text{obs}}_{t+h} - q^{\\text{sim}}_{t+h},","position":{"start":{"line":205,"column":1},"end":{"line":207,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>r</mi><mrow><mi>t</mi><mo>+</mo><mi>h</mi></mrow></msub><mo>=</mo><msubsup><mi>q</mi><mrow><mi>t</mi><mo>+</mo><mi>h</mi></mrow><mtext>obs</mtext></msubsup><mo>−</mo><msubsup><mi>q</mi><mrow><mi>t</mi><mo>+</mo><mi>h</mi></mrow><mtext>sim</mtext></msubsup><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">r_{t+h} = q^{\\text{obs}}_{t+h} - q^{\\text{sim}}_{t+h},</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6389em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">h</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2044em;vertical-align:-0.3053em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8991em;\"><span style=\"top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">h</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">obs</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3053em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1858em;vertical-align:-0.3053em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8805em;\"><span style=\"top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">h</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">sim</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3053em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span></span></span>","enumerator":"6","key":"havH0Y6aBM"},{"type":"paragraph","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"text","value":"as a function of exogenous features ","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"key":"LKmAfWCc7P"},{"type":"inlineMath","value":"z_t","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>z</mi><mi>t</mi></msub></mrow><annotation encoding=\"application/x-tex\">z_t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"u2Zchlb8kf"},{"type":"text","value":", such as weather, incident flags, or scheduled arrivals. The final forecast then becomes:","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"key":"eHxX7Lxp04"}],"key":"fNRThn1FPq"},{"type":"math","value":"\\widehat{q}_{t+h} = q^{\\text{sim}}_{t+h} + \\phi(z_t),","position":{"start":{"line":211,"column":1},"end":{"line":213,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mover accent=\"true\"><mi>q</mi><mo stretchy=\"true\">^</mo></mover><mrow><mi>t</mi><mo>+</mo><mi>h</mi></mrow></msub><mo>=</mo><msubsup><mi>q</mi><mrow><mi>t</mi><mo>+</mo><mi>h</mi></mrow><mtext>sim</mtext></msubsup><mo>+</mo><mi>ϕ</mi><mo stretchy=\"false\">(</mo><msub><mi>z</mi><mi>t</mi></msub><mo stretchy=\"false\">)</mo><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">\\widehat{q}_{t+h} = q^{\\text{sim}}_{t+h} + \\phi(z_t),</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8789em;vertical-align:-0.2083em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6706em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span></span><span class=\"svg-align\" style=\"width:calc(100% - 0.1667em);margin-left:0.1667em;top:-3.4306em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.24em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='100%' height='0.24em' viewBox='0 0 1062 239' preserveAspectRatio='none'><path d='M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">h</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1858em;vertical-align:-0.3053em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8805em;\"><span style=\"top:-2.453em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">t</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">h</span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">sim</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3053em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">ϕ</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2806em;\"><span style=\"top:-2.55em;margin-left:-0.044em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span></span></span></span></span>","enumerator":"7","key":"wsMR3h5Bv5"},{"type":"paragraph","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"v0nqtvo4CZ"},{"type":"inlineMath","value":"\\phi","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϕ</mi></mrow><annotation encoding=\"application/x-tex\">\\phi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">ϕ</span></span></span></span>","key":"v3wcsJ4RXu"},{"type":"text","value":" is a learned mapping from external conditions to the expected correction. The result is a hybrid model: the simulation enforces physical structure and agent-level behaviour, while the residual model compensates for aspects of the system that are harder to express analytically.","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"wXBEhDi3EJ"}],"key":"OgJFm4mAwI"},{"type":"heading","depth":1,"position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"children":[{"type":"text","value":"Looking Ahead","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"Gl3v5KJTXC"}],"identifier":"looking-ahead","label":"Looking Ahead","html_id":"looking-ahead","implicit":true,"key":"opPeoT9eMV"},{"type":"paragraph","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"children":[{"type":"text","value":"There’s no universally correct way to model a system. Your choice depends on what you know, what you can observe, what you care about, and what tools you have.","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"YA1y4htyn8"}],"key":"uoMrnmFvtE"},{"type":"paragraph","position":{"start":{"line":221,"column":1},"end":{"line":221,"column":1}},"children":[{"type":"text","value":"This chapter laid out a spectrum—from explicit, mechanistic models to black-box simulators and learned dynamics. In every case, modeling choices define the structure of the problem and the space of possible solutions. In the next chapters, we’ll see how they anchor learning, optimization, and decision-making.","position":{"start":{"line":221,"column":1},"end":{"line":221,"column":1}},"key":"DKTSYynlPL"}],"key":"EadakfMyYb"}],"key":"HQNAQSKhxE"}],"key":"aLuEVuVEbR"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Dynamics Models for Decision Making","url":"/ssm","group":"Modeling"},"next":{"title":"Discrete-Time Trajectory Optimization","url":"/ocp","group":"Numerical Trajectory Optimization"}}},"domain":"http://localhost:3003"}